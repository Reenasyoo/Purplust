<!DOCTYPE html>

<html>
	<head>
		 <meta charset="UTF-8"> 
		<title>Title</title>
	</head>
	<body>
		<p id = "version">Version Alpha 0.1.64 </p>

		<!-- Game file -->
		<script type="text/javascript" src="src/utilities/math.js"></script>
		<script type="text/javascript" src="src/utilities/utilities.js"></script>
		<script type="text/javascript" src="src/sprite.js"></script>
		<script type="text/javascript" src="src/settings.js"></script> 
		<script type="text/javascript" src="src/world.js"></script>
		<script type="text/javascript" src="src/entity.js"></script>
		<script type="text/javascript" src="src/Actor.js"></script>
		<script type="text/javascript" src="src/gui.js"></script>
		<script type="text/javascript" src="src/purplust.js"></script>
		<script type="text/javascript" src="game.js"></script>


		<div id = "beforeGame">
			
			<div id = "playerSetup">

				<p>Ievadiet spēlētāja vārdu</p>
				<input type="nameInput" id="nameInput"></input>

				<form id = "clasSel">
					<p>Izvēlaties klasi! </p>
					<input type="radio" name="classSelect" value="mage" >Burvis</input>
					<input type="radio" name="classSelect" value="Warrior" >Cinitajs</input>
				</form>

				<form id = "raceSel">
					<p>Izvēlaties Rasi! </p>
					<input type="radio" name="raceSelect" value="Human" >Cilveks</input>
					<input type="radio" name="raceSelect" value="Reptile" >Reptilis</input>
				</form>
				

				<p>Saglabāt spēlētāja iestatijumus</p>
				<button id = "submit" onclick="setupPlayer()"> Submit Player settings</button>

			</div>

			<button id = "start" onclick="startGame()"> Start Game</button>
		</div>
			
			<script type="text/javascript">
				var bg = document.getElementById('beforeGame');
				var plSetup = document.getElementById('playerSetup');
				var starB = document.getElementById('start');
			
				var setupPlayer = function() {
					var playerName = document.getElementById("nameInput").value;
					var playerRace = getRadioValue(document.getElementById("raceSel"), "raceSelect");
					var playerClass = getRadioValue(document.getElementById("clasSel"), "classSelect");
					
					//speletaja konta konstruktors
					var p = new Actor({
					    race : playerRace,
					    klass : playerClass,
					    characterName : playerName,
					});

					//speletaja entitijas konstruktors
					p.entity = new Entity({
					    x : 33,
					    y : 33,
					    width : 32,
					    height : 32,
					    map : m,
					    type : "player",
					});

					//sis nebutu vajadzigs
					//izlabot
					p.healthBar = new gui.Bar({
					    
					    x : 175,
					    y : game.height - 100,
					    width : 220,
					    height : 15,
					    fullLenght : 10,
					    currentLenght : 5,
					});



					p.entity.sprite = new Sprite({
					            image : game.resources['player'].image,
					            width: 32,
					            height: 32,
					            numberOfFrames : 3,
					            ticksPerFrame : 3,
					});

					p.Name = new gui.Text({
					                    x : p.entity.x,
					                    y : p.entity.y - 3,
					                    textSize : 20,
					                    fillableText : playerName,
					                });
					game.actor = p;
					gui.setActor(game.actor);


					plSetup.style.display = "none";
					starB.style.display = "table";
				}

				var startGame = function() {
					bg.style.display = "none";

					game.Run();

				}
			</script>


		</div>
		<h1 id = "end"> Game over</h1>
	  <!--
		ir iespeja ari izveidot konkreta izmera canvas tagu ar konkretiem dimensiju izmeriem
		bet sai situacijai tas nav nepieciesams jo canvas tags izveidojas dinamiski

		piemers: <canvas id="canvas" width="800" height="600"></canvas> 
	  -->
	  <!-- Css -->
	   <style type="text/css">
	   	#html, body{

			margin: 0px;
			overflow: hidden; /*  Disable scrollbars */
			display: block;
			border: 1px solid red;
			background-color: gray;
			
	   	}
	   	#version {
	   		position: absolute;
	   		right: 0;
	   	}
	   	#beforeGame {
	   		position: absolute;
	   		top: 100px;
	   		left:  100px;
	   	}

		#button {
			display: none;
		}
		#start {
			display: none;
		}
		#playerSetup {
			display: table;
		} 
		#end {
			position: absolute;
    		top: 50%;
    		left: 50%;
    		transform: translateX(-50%) translateY(-50%);
    		display: none;
			
		}
	   </style>
	</body>
</html>